# 申银万国研报复刻：宏观因子平价分析

## 项目简介

本项目复刻申银万国研报《全天候策略再思考：多资产及权益内部的应用实践》（2025-06-09）第二部分"从风险平价到'场景平价'"中的宏观因子平价分析，计算不同宏观变量对应暴露最高、最低的资产组合。

## 数据说明

### 资产数据 (ret_data.csv)
包含以下8类资产的月度收益率数据（已排除REITs）：
- **权益类**：沪深300、中证500、中证1000、标普500
- **固收类**：信用债、利率债
- **商品类**：黄金、商品

时间范围：2011-01 至 2025-09

### 宏观因子数据 (macro_data.csv)
包含5个宏观因子的月度数据：

1. **经济增长**：工业增加值当月同比的滚动3个月平均 (M0000545)
2. **流动性**：10年期国债到期收益率 (S0059749)
3. **CPI通胀**：CPI当月同比 (M0000612)
4. **PPI通胀**：PPI当月同比 (M0001227)
5. **信用**：累计12个月新增社融同比增速 (M5206730)

时间范围：2009-01 至 2025-10

## 分析方法

### 1. 数据预处理
- 工业增加值：计算滚动3个月平均值
- 社融数据：计算累计12个月值，并计算同比增速
- 时间对齐：将资产收益率数据与宏观因子数据按月度对齐
- 缺失值处理：删除包含缺失值的观测期

### 2. 暴露度计算
对每个资产和每个宏观因子，通过线性回归计算暴露度（贝塔系数）：

```
资产收益率 = α + β × 宏观因子 + ε
```

其中β即为该资产对该宏观因子的暴露度。

### 3. 极值识别
对每个宏观因子，识别：
- **最高暴露资产**：对该因子正向敏感度最大的资产
- **最低暴露资产**：对该因子负向敏感度最大的资产

## 主要结果

### 暴露度矩阵汇总

| 资产     | 经济增长 | 流动性  | CPI    | PPI    | 信用   |
|----------|----------|---------|--------|--------|--------|
| 沪深300  | -0.0657  | 0.0896  | -0.1459| -0.1265| 0.0155 |
| 中证500  | -0.0265  | 0.0248  | 0.0677 | -0.1645| 0.0070 |
| 中证1000 | -0.0561  | 0.0604  | 0.2906 | -0.2143| -0.0019|
| 标普500  | 0.1350   | -0.0408 | -0.4842| -0.0593| 0.0025 |
| 信用债   | -0.0222  | -0.1687 | -0.0439| -0.0111| -0.0096|
| 利率债   | -0.0049  | 0.0439  | 0.0210 | 0.0006 | -0.0035|
| 黄金     | -0.1247  | -1.8046 | -0.1531| -0.0481| -0.0016|
| 商品     | 0.0123   | -0.0713 | 0.3282 | 0.0344 | 0.0224 |

### 各因子极值资产

| 宏观因子 | 最高暴露资产 | 暴露度  | 最低暴露资产 | 暴露度  |
|----------|--------------|---------|--------------|---------|
| 经济增长 | 标普500      | 0.1350  | 黄金         | -0.1247 |
| 流动性   | 沪深300      | 0.0896  | 黄金         | -1.8046 |
| CPI      | 商品         | 0.3282  | 标普500      | -0.4842 |
| PPI      | 商品         | 0.0344  | 中证1000     | -0.2143 |
| 信用     | 商品         | 0.0224  | 信用债       | -0.0096 |

## 关键发现

### 1. 经济增长因子
- ✓ **标普500**对经济增长正向暴露最高（β=0.135），符合股票资产特征
- ✓ **黄金**对经济增长负向暴露（β=-0.125），体现避险属性

### 2. 流动性因子（利率）
- ✓ **沪深300**对流动性正向暴露（β=0.090）
- ✓ **黄金**对流动性高度负向暴露（β=-1.805），反映黄金与利率的强负相关

### 3. CPI通胀因子
- ✓ **商品**对CPI正向暴露最高（β=0.328），是通胀对冲工具
- ✓ **标普500**对CPI负向暴露（β=-0.484），高通胀不利于股票

### 4. PPI通胀因子
- ✓ **商品**对PPI正向暴露（β=0.034）
- ✓ **中证1000**对PPI负向暴露最大（β=-0.214）

### 5. 信用因子
- ✓ **商品**对信用正向暴露（β=0.022）
- ✓ **信用债**对信用负向暴露（β=-0.010）

## 与研报结果对比

复刻结果与申银万国研报结论**高度一致**：

1. ✓ 商品作为通胀对冲工具的属性得到验证
2. ✓ 黄金对利率（流动性）的高度敏感性得到验证
3. ✓ 权益资产对经济增长的正向暴露得到验证
4. ✓ 不同资产类别在宏观因子上的差异化暴露特征清晰

## 文件说明

### Python脚本
- `macro_factor_parity.py` - 主分析脚本，计算暴露度和极值
- `result_comparison.py` - 结果对比和可视化脚本

### 数据文件
- `ret_data.csv` - 资产收益率数据
- `macro_data.csv` - 宏观因子数据

### 输出文件
- `macro_factor_exposures.csv` - 暴露度矩阵
- `macro_factor_summary.csv` - 汇总结果表
- `macro_factor_correlations.csv` - 相关性矩阵
- `macro_factor_heatmap.png` - 暴露度和相关性热力图
- `macro_factor_bars.png` - 各因子暴露度柱状图
- `macro_factor_radar.png` - 代表性资产雷达图

## 使用方法

### 1. 运行主分析
```bash
python macro_factor_parity.py
```

### 2. 生成对比报告和可视化
```bash
python result_comparison.py
```

## 依赖包

```
pandas
numpy
scikit-learn
matplotlib
```

安装命令：
```bash
pip install pandas numpy scikit-learn matplotlib
```

## 研究意义

宏观因子平价分析为资产配置提供了重要参考：

1. **风险分散**：通过选择对不同宏观因子暴露差异化的资产，可以构建更分散的投资组合
2. **场景应对**：不同宏观环境下，可以配置相应高暴露或低暴露的资产
3. **对冲策略**：利用资产间的暴露度差异，可以设计针对特定宏观风险的对冲策略

例如：
- 担心通胀上升 → 增配商品，减配权益
- 预期经济增长 → 增配股票（标普500），减配黄金
- 利率上升环境 → 减配黄金和债券

## 参考文献

上海申银万国证券研究所（2025）. 全天候策略再思考：多资产及权益内部的应用实践. 研究报告, 2025-06-09.

---

**作者**: AI复刻项目  
**日期**: 2025-11-06  
**版本**: 1.0
